import React from "react";
import { Clock } from "./component/Clock";
import { User } from "./component/User";
import { Weather } from "./component/Weather";
import { ToDo } from "./component/ToDo";
import { useEffect, useState } from "react";

export const App = (props) => {
  //console.log("props-App: ", props);
  const [dataUrl, setDataUrl] = useState("");

  useEffect(() => {
    getRandom();
    setInterval(getRandom, 180000);
  }, []);

  function getPoster(number) {
    fetch("https://picsum.photos/v2/list?page=1&limit=100")
      .then((response) => response.json())
      .then((responsejson) => {
        const bacgroundSrc = responsejson[number].download_url;
        setDataUrl(bacgroundSrc);
      });
  }

  function getRandom() {
    const number = Math.floor(Math.random() * 100);
    getPoster(number);
  }

  return (
    <div className="wrapper">
      <div className="background" style={{ backgroundImage: `url(${dataUrl})` }}>
        <h1 className="beta__status">
          BETA
          <svg className="gear" viewBox="-55 -55 110 110" height="40px">
            <path d="M38.2 5.04c0.21,-1.65 0.36,-3.29 0.36,-5.04 0,-1.75 -0.15,-3.39 -0.36,-5.04l10.85 -8.48c0.98,-0.77 1.23,-2.16 0.62,-3.29l-10.28 -17.78c-0.47,-0.83 -1.34,-1.29 -2.27,-1.29 -0.3,0 -0.61,0.05 -0.87,0.15l-12.8 5.14c-2.67,-2.05 -5.55,-3.75 -8.69,-5.03l-1.95 -13.63c-0.15,-1.23 -1.23,-2.15 -2.52,-2.15l-20.56 0c-1.29,0 -2.36,0.92 -2.52,2.15l-1.95 13.63c-3.14,1.28 -6.02,3.03 -8.69,5.03l-12.8 -5.14c-0.31,-0.1 -0.61,-0.15 -0.92,-0.15 -0.88,0 -1.75,0.46 -2.22,1.29l-10.27 17.78c-0.67,1.13 -0.36,2.52 0.61,3.29l10.85 8.48c-0.21,1.65 -0.36,3.34 -0.36,5.04 0,1.69 0.15,3.39 0.36,5.04l-10.85 8.48c-0.97,0.77 -1.23,2.16 -0.61,3.29l10.27 17.78c0.47,0.83 1.34,1.29 2.27,1.29 0.31,0 0.61,-0.05 0.87,-0.15l12.8 -5.15c2.67,2.06 5.55,3.76 8.69,5.04l1.95 13.62c0.16,1.24 1.23,2.16 2.52,2.16l20.56 0c1.29,0 2.37,-0.92 2.52,-2.16l1.95 -13.62c3.14,-1.28 6.02,-3.03 8.69,-5.04l12.8 5.15c0.31,0.1 0.62,0.15 0.93,0.15 0.87,0 1.74,-0.46 2.21,-1.29l10.28 -17.78c0.61,-1.13 0.36,-2.52 -0.62,-3.29l-10.85 -8.48zm-10.17 -8.79c0.2,1.59 0.25,2.67 0.25,3.75 0,1.08 -0.1,2.21 -0.25,3.75l-0.72 5.81 4.57 3.6 5.55 4.32 -3.6 6.22 -6.52 -2.63 -5.35 -2.15 -4.63 3.49c-2.21,1.64 -4.31,2.88 -6.42,3.75l-5.45 2.21 -0.82 5.81 -1.03 6.94 -7.2 0 -0.97 -6.94 -0.83 -5.81 -5.44 -2.21c-2.22,-0.92 -4.27,-2.11 -6.33,-3.65l-4.68 -3.59 -5.44 2.21 -6.53 2.62 -3.6 -6.22 5.55 -4.32 4.58 -3.6 -0.72 -5.81c-0.16,-1.59 -0.26,-2.77 -0.26,-3.8 0,-1.03 0.1,-2.21 0.26,-3.75l0.72 -5.81 -4.58 -3.6 -5.55 -4.32 3.6 -6.22 6.53 2.62 5.34 2.16 4.63 -3.49c2.21,-1.65 4.32,-2.88 6.42,-3.76l5.45 -2.21 0.82 -5.8 1.03 -6.94 7.15 0 0.98 6.94 0.82 5.8 5.45 2.21c2.21,0.93 4.26,2.11 6.32,3.65l4.68 3.6 5.44 -2.21 6.53 -2.62 3.6 6.22 -5.5 4.37 -4.57 3.6 0.72 5.81zm-28.02 -16.81c-11.36,0 -20.56,9.2 -20.56,20.56 0,11.36 9.2,20.56 20.56,20.56 11.36,0 20.56,-9.2 20.56,-20.56 0,-11.36 -9.2,-20.56 -20.56,-20.56zm0 30.84c-5.65,0 -10.28,-4.63 -10.28,-10.28 0,-5.66 4.63,-10.28 10.28,-10.28 5.66,0 10.28,4.62 10.28,10.28 0,5.65 -4.62,10.28 -10.28,10.28z"></path>
          </svg>
        </h1>
        <div className="dashboard container">
          <Weather />
          <Clock />
          <User />
          <ToDo /* store={props.store} */ />
        </div>
      </div>
    </div>
  );
};
